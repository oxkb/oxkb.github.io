<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Online Amharic Keyboard (የአማርኛ ኪቦርድ) - Type Amharic Easily</title>
    <meta name="description" content="A free and easy-to-use online Amharic keyboard (Fidel keyboard) to type Amharic letters and characters directly in your browser. Supports physical keyboard input.">
    <meta name="keywords" content="Amharic keyboard, online Amharic keyboard, Fidel keyboard, type Amharic, አማርኛ ኪቦርድ, Ethiopian keyboard, Geez keyboard, free Amharic typing">
    <meta name="author" content="Ahmedhaji Sadik Umer">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://amkb.vercel.app/">
    <meta property="og:title" content="Online Amharic Keyboard (የአማርኛ ኪቦርድ) - Type Amharic Easily">
    <meta property="og:description" content="Free online Amharic Fidel keyboard for easy typing in your browser.">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://amkb.vercel.app/">
    <meta property="twitter:title" content="Online Amharic Keyboard (የአማርኛ ኪቦርድ) - Type Amharic Easily">
    <meta property="twitter:description" content="Free online Amharic Fidel keyboard for easy typing in your browser.">

    <meta name="google-site-verification" content="YOykyV7jEUg5Nj2GeyhHUcewf9WW-Ruyke1v23KePrY" />

    <style>
        body {
            font-family: 'Noto Sans Ethiopic', 'Nyala', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f4f4f4;
            min-height: 100vh;
            box-sizing: border-box;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            margin-top: 0
        }

        .main-layout {
            display: flex;
            flex-direction: row;
            gap: 20px;
            width: 95%;
            max-width: 1200px;
            align-items: flex-start;
            margin: 0 auto;
        }

        #keyboard-container {
            background-color: #e0e0e0;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            flex: 1 1 450px;
            max-width: 600px;
            align-self: stretch;
        }

        textarea {
            padding: 15px;
            font-size: 1.5em;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-family: inherit;
            flex: 1 1 45%;

            min-height: 200px;
            box-sizing: border-box;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
            min-height: 45px;
        }

        .key {
            padding: 10px 15px;
            font-size: 1.2em;
            min-width: 40px;
            text-align: center;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
            font-family: inherit;
            user-select: none;
        }

        .key:hover {
            background-color: #f0f0f0;
        }

        .key:active {
            background-color: #dcdcdc;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .key-special {
            padding: 10px 20px;
        }

        .key-space {
            flex-grow: 4;
        }

        .key-backspace {
            flex-grow: 1;
        }

        #variation-keys:not(:empty) {
            background-color: #f8f8f8;
            padding: 5px;
            border-radius: 5px;
            margin-bottom: 5px;
        }

        #variation-keys:empty {
            display: none;
        }

        .keyboard-info {
            width: 95%;
            max-width: 1200px;
            margin-top: 15px;
            text-align: left;
            font-size: 0.9em; /* Small font */
            color: #333;
            background-color: #fffacd; /* Yellow background */
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #e0c240;
            line-height: 1.4;
        }
        .keyboard-info strong {
            font-weight: bold;
        }
        .keyboard-info span {
            display: inline-block;
            margin-right: 15px;
            white-space: nowrap; /* Keep items on one line if space allows */
        }


        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 1.5em;
                margin-bottom: 15px;
            }

            .main-layout {
                flex-direction: column;
                align-items: center;
                width: 100%;
                gap: 15px;
            }

            #keyboard-container {
                flex-basis: auto;
                width: 100%;
                max-width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                align-self: auto;
            }

            textarea {
                flex-basis: auto;
                width: 100%;
                max-width: 100%;
                min-height: 150px;
                font-size: 1.3em;
            }

            .key {
                padding: 8px 10px;
                font-size: 1.1em;
                min-width: 35px;
            }

            .key-space {
                flex-grow: 3;
            }

            .keyboard-info {
                font-size: 0.85em; /* Smaller font on small screens */
                padding: 8px;
                width: 100%;
            }
            .keyboard-info span {
                margin-right: 10px;
            }
        }

        @media (max-width: 480px) {
            .key {
                padding: 6px 8px;
                font-size: 1em;
                min-width: 30px;
            }
            h1 {
                font-size: 1.3em;
            }
            textarea {
                min-height: 120px;
                font-size: 1.2em;
            }
            .keyboard-info {
                font-size: 0.8em; /* Even smaller font on very small screens */
                padding: 6px;
            }
            .keyboard-info span {
                display: block; /* Stack items on very small screens */
                margin-right: 0;
            }
        }
    </style>
</head>
<body>

    <h1>Online Amharic Keyboard (የአማርኛ ኪቦርድ)</h1>

    <div class="main-layout">
        <div id="keyboard-container">
            <div id="variation-keys" class="keyboard-row">
            </div>
            <div id="base-keys" class="keyboard-row">
            </div>
            <div id="punctuation-keys" class="keyboard-row">
            </div>
            <div id="symbol-emoji-keys" class="keyboard-row">
            </div>
            <div id="number-keys" class="keyboard-row">
            </div>
            <div id="special-keys" class="keyboard-row">
            </div>
        </div>

        <textarea id="output" rows="8" placeholder="Type Amharic here..."></textarea>
    </div>

    <div class="keyboard-info"> Using physical keyboard  and phonetic approach:
le = ለ
lu= ሉ
li = ሊ
la = ላ
ly = ሌ
l = ል
lo = ሎ
lwa = ሏ
   ; = ሸ
, = ፣  |  shift + , = ጸ  
. = ።  | shift + . = ፀ        
h = ሀ | Shift + h = ሐ
s = ሰ | Shift + s = ሠ
t = ተ | Shift + t = ጠ
c = ቸ | Shift + c = ጨ
v = ቨ | Shift + v = ኀ
n = ነ | Shift + n = ኘ
k = ከ | Shift + k = ኸ
z = ዘ | Shift + z = ዠ
p = ፐ | Shift + p = ጰ
l = ለ
m = መ
r = ረ
X = ሸ
q = ቀ
b = በ
w = ወ
y = የ
d = ደ
j = ጀ
g = ገ
~ = ጸ
f = ፈ
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const outputTextarea = document.getElementById('output');
            const baseKeysContainer = document.getElementById('base-keys');
            const variationKeysContainer = document.getElementById('variation-keys');
            const punctuationKeysContainer = document.getElementById('punctuation-keys');
            const symbolEmojiKeysContainer = document.getElementById('symbol-emoji-keys');
            const numberKeysContainer = document.getElementById('number-keys');
            const specialKeysContainer = document.getElementById('special-keys');

            const fidelGroups = {
                'ሀ': ['ሀ', 'ሁ', 'ሂ', 'ሃ', 'ሄ', 'ህ', 'ሆ', 'ኋ'], 
                'ለ': ['ለ', 'ሉ', 'ሊ', 'ላ', 'ሌ', 'ል', 'ሎ', 'ሏ'],
                'ሐ': ['ሐ', 'ሑ', 'ሒ', 'ሓ', 'ሔ', 'ሕ', 'ሖ', 'ሗ'], 
                'መ': ['መ', 'ሙ', 'ሚ', 'ማ', 'ሜ', 'ም', 'ሞ', 'ሟ'],
                'ሠ': ['ሠ', 'ሡ', 'ሢ', 'ሣ', 'ሤ', 'ሥ', 'ሦ', 'ሧ'], 
                'ረ': ['ረ', 'ሩ', 'ሪ', 'ራ', 'ሬ', 'ር', 'ሮ', 'ሯ'],
                'ሰ': ['ሰ', 'ሱ', 'ሲ', 'ሳ', 'ሴ', 'ስ', 'ሶ', 'ሷ'], 
                'ሸ': ['ሸ', 'ሹ', 'ሺ', 'ሻ', 'ሼ', 'ሽ', 'ሾ', 'ሿ'],
                'ቀ': ['ቀ', 'ቁ', 'ቂ', 'ቃ', 'ቄ', 'ቅ', 'ቆ', 'ቋ'],
                'በ': ['በ', 'ቡ', 'ቢ', 'ባ', 'ቤ', 'ብ', 'ቦ', 'ቧ'], 
                'ተ': ['ተ', 'ቱ', 'ቲ', 'ታ', 'ቴ', 'ት', 'ቶ', 'ቷ'],
                'ቸ': ['ቸ', 'ቹ', 'ቺ', 'ቻ', 'ቼ', 'ች', 'ቾ', 'ቿ'], 
                'ኀ': ['ኀ', 'ኁ', 'ኂ', 'ኃ', 'ኄ', 'ኅ', 'ኆ', 'ኋ'],
                'ነ':  ['ነ', 'ኑ', 'ኒ', 'ና', 'ኔ', 'ን', 'ኖ', 'ኗ'], 
                'ኘ': ['ኘ', 'ኙ', 'ኚ', 'ኛ', 'ኜ', 'ኝ', 'ኞ', 'ኟ'],
                'አ': ['አ', 'ኡ', 'ኢ', 'ኣ', 'ኤ', 'እ', 'ኦ'], 
                'ከ': ['ከ', 'ኩ', 'ኪ', 'ካ', 'ኬ', 'ክ', 'ኮ', 'ኳ'],
                'ኸ': ['ኸ', 'ኹ', 'ኺ', 'ኻ', 'ኼ', 'ኽ', 'ኾ','ዃ'],
                'ወ': ['ወ', 'ዉ', 'ዊ', 'ዋ', 'ዌ', 'ው', 'ዎ'],
                'ዐ': ['ዐ', 'ዑ', 'ዒ', 'ዓ', 'ዔ', 'ዕ', 'ዖ'],
                'ዘ': ['ዘ', 'ዙ', 'ዚ', 'ዛ', 'ዜ', 'ዝ', 'ዞ', 'ዟ'], 
                'ዠ': ['ዠ', 'ዡ', 'ዢ', 'ዣ', 'ዤ', 'ዥ', 'ዦ', 'ዧ'],
                'የ': ['የ', 'ዩ', 'ዪ', 'ያ', 'ዬ', 'ይ', 'ዮ'],
                'ደ': ['ደ', 'ዱ', 'ዲ', 'ዳ', 'ዴ', 'ድ', 'ዶ', 'ዷ'], 
                'ጀ': ['ጀ', 'ጁ', 'ጂ', 'ጃ', 'ጄ', 'ጅ', 'ጆ', 'ጇ'],
                'ገ': ['ገ', 'ጉ', 'ጊ', 'ጋ', 'ጌ', 'ግ', 'ጎ', 'ጓ'],
                'ጠ': ['ጠ', 'ጡ', 'ጢ', 'ጣ', 'ጤ', 'ጥ', 'ጦ', 'ጧ'],
                'ጨ': ['ጨ', 'ጩ', 'ጪ', 'ጫ', 'ጬ', 'ጭ', 'ጮ', 'ጯ'],
                'ጰ': ['ጰ', 'ጱ', 'ጲ', 'ጳ', 'ጴ', 'ጵ', 'ጶ', 'ጷ'], 
                'ጸ': ['ጸ', 'ጹ', 'ጺ', 'ጻ', 'ጼ', 'ጽ', 'ጾ', 'ጿ'],
                'ፀ': ['ፀ', 'ፁ', 'ፂ', 'ፃ', 'ፄ', 'ፅ', 'ፆ', 'ፇ'], 
                'ፈ': ['ፈ', 'ፉ', 'ፊ', 'ፋ', 'ፌ', 'ፍ', 'ፎ', 'ፏ'],
                'ፐ': ['ፐ', 'ፑ', 'ፒ', 'ፓ', 'ፔ', 'ፕ', 'ፖ', 'ፗ']
            };

            const punctuationVirtual = ['፡', '።', '፣', '፤', '፥', '፦', '፧', '፨', '(', ')', '!', '?'];
            const numbersVirtual = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];
            const specialKeysVirtual = ['Backspace', 'Space', 'Enter'];
            const symbolsAndEmojis = [
                '@', '#', '$', '%', '&', '*', '-', '+', '=', '/', '\\', '|', '<', '>',
                '😀', '😂', '👍', '🙏', '❤️'
            ];

            let keySequence = '';
            let sequenceTimer = null;
            const SEQUENCE_TIMEOUT = 2000;

            const sequenceMapping = {};
            const potentialPrefixes = new Set();
            const baseConsonantToSixthForm = {};
            let lastDisplayedVariationsBase = null;

            const baseKeyTriggers = {
                'h': 'ሀ', 'l': 'ለ', 'H': 'ሐ', 'm': 'መ', 'S': 'ሠ', 'r': 'ረ', 's': 'ሰ',
                ';': 'ሸ', 'q': 'ቀ', 'b': 'በ', 'v': 'ቨ', 't': 'ተ', 'c': 'ቸ',
                'V': 'ኀ', 'n': 'ነ', 'N': 'ኘ', 'x': 'አ',
                'k': 'ከ', 'K': 'ኸ', 'w': 'ወ', 'X': 'ዐ', 'z': 'ዘ', 'Z': 'ዠ',
                'Y': 'የ', 'd': 'ደ', 'j': 'ጀ', 'g': 'ገ', 'T': 'ጠ', 'C': 'ጨ', 'P': 'ጰ',
                '<': 'ጸ', '>': 'ፀ', 'f': 'ፈ', 'p': 'ፐ'      
            };

            for (const keyTrigger in baseKeyTriggers) {
                const baseFidel = baseKeyTriggers[keyTrigger];
                const variations = fidelGroups[baseFidel];
                if (!variations || variations.length < 7) continue;

                potentialPrefixes.add(keyTrigger);

                sequenceMapping[keyTrigger + 'e'] = variations[0];
                sequenceMapping[keyTrigger + 'u'] = variations[1];
                sequenceMapping[keyTrigger + 'i'] = variations[2];
                sequenceMapping[keyTrigger + 'a'] = variations[3];
                sequenceMapping[keyTrigger + 'y'] = variations[4];
                sequenceMapping[keyTrigger + 'o'] = variations[6];

                if (variations.length > 7 && variations[7]) {
                    const labializedSequence = keyTrigger + 'wa';
                    sequenceMapping[labializedSequence] = variations[7];
                    potentialPrefixes.add(keyTrigger + 'w');
                }

                baseConsonantToSixthForm[keyTrigger] = variations[5];
            }

            const directMappings = {
                '.': '።', ',': '፣', ';': '፤', ':': '፡', '?': '፧',
                '!': '፩', '@': '፪', '#': '፫', '$': '፬', '%': '፭',
                '^': '፮', '&': '፯', '*': '፰', '(': '፱', ')': '፲',
            };
            for (const key in directMappings) {
                sequenceMapping[key] = directMappings[key];
            }

            function createKey(keyChar, container, clickHandler, cssClasses = [], ariaLabel = null) {
                const keyElement = document.createElement('button');
                keyElement.textContent = keyChar;
                keyElement.classList.add('key', ...cssClasses);
                keyElement.addEventListener('click', clickHandler);

                keyElement.setAttribute('aria-label', ariaLabel || keyChar);

                container.appendChild(keyElement);
                return keyElement;
            }

            function resolveSequence() {
                if (sequenceTimer) {
                    clearTimeout(sequenceTimer);
                    sequenceTimer = null;
                }
                if (baseConsonantToSixthForm[keySequence]) {
                    insertAtCursor(outputTextarea, baseConsonantToSixthForm[keySequence]);
                }
                keySequence = '';
            }

            function clearSequenceStateOnly() {
                if (sequenceTimer) clearTimeout(sequenceTimer);
                resolveSequence();
                keySequence = '';
            }

            function displayVariations(baseFidel) {
                const variations = fidelGroups[baseFidel];
                variationKeysContainer.innerHTML = '';

                if (variations) {
                    variations.forEach(variation => {
                        createKey(variation, variationKeysContainer, handleCharKeyClick);
                    });
                    lastDisplayedVariationsBase = baseFidel;
                } else {
                    lastDisplayedVariationsBase = null;
                }
            }

            function handleBaseKeyClick(event) {
                clearSequenceStateOnly();
                const baseKey = event.target.textContent;
                displayVariations(baseKey);
            }

            function handleCharKeyClick(event) {
                clearSequenceStateOnly();
                const char = event.target.textContent;
                insertAtCursor(outputTextarea, char);
            }

            function handleSpecialKeyClick(event) {
                clearSequenceStateOnly();
                const keyType = event.target.textContent;
                processSpecialKey(keyType);
                outputTextarea.focus();
            }

            function insertAtCursor(textarea, textToInsert) {
                const startPos = textarea.selectionStart;
                const endPos = textarea.selectionEnd;
                const currentVal = textarea.value;
                textarea.value = currentVal.substring(0, startPos) + textToInsert + currentVal.substring(endPos);
                const newCursorPos = startPos + textToInsert.length;
                textarea.selectionStart = textarea.selectionEnd = newCursorPos;
                textarea.focus();
            }

            function processSpecialKey(keyType) {
                const currentVal = outputTextarea.value;
                const selectionStart = outputTextarea.selectionStart;
                const selectionEnd = outputTextarea.selectionEnd;

                switch (keyType) {
                    case 'Backspace':
                        if (selectionStart === selectionEnd && selectionStart > 0) {
                            outputTextarea.value = currentVal.substring(0, selectionStart - 1) + currentVal.substring(selectionEnd);
                            outputTextarea.selectionStart = outputTextarea.selectionEnd = selectionStart - 1;
                        } else if (selectionStart !== selectionEnd) {
                            outputTextarea.value = currentVal.substring(0, selectionStart) + currentVal.substring(selectionEnd);
                            outputTextarea.selectionStart = outputTextarea.selectionEnd = selectionStart;
                        }
                        break;
                    case 'Space': case ' ':
                        insertAtCursor(outputTextarea, ' ');
                        break;
                    case 'Enter':
                        insertAtCursor(outputTextarea, '\n');
                        break;
                }
            }

            outputTextarea.addEventListener('keydown', (event) => {
                if (event.ctrlKey || event.altKey || event.metaKey) {
                    clearSequenceStateOnly();
                    return;
                }

                const key = event.key;

                if (key === 'Backspace' || key === 'Enter' || key === ' ') {
                    event.preventDefault();
                    clearSequenceStateOnly();
                    processSpecialKey(key);
                    return;
                }

                if (key.startsWith('Arrow') || key === 'Tab' || key === 'Escape' ||
                    key === 'Home' || key === 'End' || key === 'PageUp' || key === 'PageDown' ||
                    key === 'Delete' || key.startsWith('F') || key === 'Shift' ||
                    key === 'Control' || key === 'Alt' || key === 'Meta' || key === 'CapsLock') {
                    resolveSequence();
                    return;
                }

                if (sequenceTimer) {
                    clearTimeout(sequenceTimer);
                    sequenceTimer = null;
                }

                const keyForMapping = key;
                const potentialNewSequence = keySequence + keyForMapping;

                if (sequenceMapping.hasOwnProperty(potentialNewSequence)) {
                    event.preventDefault();
                    insertAtCursor(outputTextarea, sequenceMapping[potentialNewSequence]);
                    keySequence = '';
                    return;
                }

                if (potentialPrefixes.has(potentialNewSequence)) {
                    event.preventDefault();
                    keySequence = potentialNewSequence;
                    sequenceTimer = setTimeout(resolveSequence, SEQUENCE_TIMEOUT);

                    let baseTrigger = potentialNewSequence;
                    if (potentialNewSequence.endsWith('w') && potentialNewSequence.length > 1) {
                        baseTrigger = potentialNewSequence.slice(0, -1);
                    } else if (potentialNewSequence.length > 1) {
                        baseTrigger = potentialNewSequence.charAt(0);
                    }
                    const baseFidel = baseKeyTriggers[baseTrigger];
                    if (baseFidel && baseFidel !== lastDisplayedVariationsBase) {
                        displayVariations(baseFidel);
                    }
                    return;
                }

                if (keySequence.length > 0) {
                    resolveSequence();
                }

                if (sequenceMapping.hasOwnProperty(keyForMapping)) {
                    event.preventDefault();
                    insertAtCursor(outputTextarea, sequenceMapping[keyForMapping]);
                    keySequence = '';
                    return;
                }

                if (potentialPrefixes.has(keyForMapping)) {
                    event.preventDefault();
                    keySequence = keyForMapping;
                    sequenceTimer = setTimeout(resolveSequence, SEQUENCE_TIMEOUT);

                    const baseFidel = baseKeyTriggers[keyForMapping];
                    if (baseFidel && baseFidel !== lastDisplayedVariationsBase) {
                        displayVariations(baseFidel);
                    }
                    return;
                }

                keySequence = '';
            });

            function initKeyboard() {
                Object.keys(fidelGroups).forEach(baseKey => {
                    createKey(baseKey, baseKeysContainer, handleBaseKeyClick);
                });
                punctuationVirtual.forEach(punc => {
                    const puncKey = createKey(punc, punctuationKeysContainer, handleCharKeyClick);
                    puncKey.addEventListener('click', clearSequenceStateOnly);
                });
                symbolsAndEmojis.forEach(item => {
                    const itemKey = createKey(item, symbolEmojiKeysContainer, handleCharKeyClick);
                    itemKey.addEventListener('click', clearSequenceStateOnly);
                });
                numbersVirtual.forEach(num => {
                    const numKey = createKey(num, numberKeysContainer, handleCharKeyClick);
                    numKey.addEventListener('click', clearSequenceStateOnly);
                });
                specialKeysVirtual.forEach(keyName => {
                    const classes = ['key-special'];
                    if (keyName === 'Space') classes.push('key-space');
                    if (keyName === 'Backspace') classes.push('key-backspace');
                    createKey(keyName, specialKeysContainer, handleSpecialKeyClick);
                });
            }

            initKeyboard();

            document.addEventListener('click', (event) => {
                if (!event.target.closest('#keyboard-container') &&
                    !event.target.closest('#variation-keys') &&
                    event.target !== outputTextarea) {
                    clearSequenceStateOnly();
                    variationKeysContainer.innerHTML = '';
                    lastDisplayedVariationsBase = null;
                }
            });

            outputTextarea.addEventListener('blur', () => {
                setTimeout(() => {
                    if (!document.activeElement ||
                        (!document.activeElement.closest('#keyboard-container') &&
                         !document.activeElement.closest('#variation-keys') &&
                         document.activeElement !== outputTextarea))
                    {
                        clearSequenceStateOnly();
                        variationKeysContainer.innerHTML = '';
                        lastDisplayedVariationsBase = null;
                    }
                }, 150);
            });

        });
    </script>
</body>
</html>
